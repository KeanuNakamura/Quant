# QuantEase Backend API

This is the backend API for the QuantEase application, a democratized quantitative trading assistant that helps users build investment portfolios based on their risk profile and preferences.

## Features

- Portfolio recommendation based on user profile
- LLM-powered conversation interface for collecting user information
- CSV generation for portfolio allocation and historical performance
- CSV processing for importing portfolio data

## Setup

1. Install dependencies:

```bash
pip install -r requirements.txt
```

2. Run the server:

```bash
python -m uvicorn main:app --reload
```

The API will be available at http://localhost:8000

## API Endpoints

### User Profile and Recommendations

- `POST /recommendation`: Generate a portfolio recommendation based on user profile
- `POST /recommendation-from-conversation/{conversation_id}`: Generate a recommendation from conversation data

### LLM Conversation

- `POST /conversation/start/{user_id}`: Start a new conversation
- `POST /conversation/{conversation_id}`: Process a message in a conversation
- `GET /conversation/{conversation_id}/data`: Get collected data from a conversation

### CSV Processing

- `POST /generate-csv`: Generate a CSV file with portfolio allocation and performance
- `POST /process-csv`: Process a CSV file to extract portfolio data

## API Documentation

Interactive API documentation is available at http://localhost:8000/docs when the server is running.

## LLM Integration

The backend includes a mock LLM service for demonstration purposes. In a production environment, you would integrate with an actual LLM API like OpenAI, Anthropic, etc.

### Conversation Flow

1. Start a conversation with `/conversation/start/{user_id}`
2. Send user messages to `/conversation/{conversation_id}`
3. The LLM will guide the user through collecting their investment profile
4. When the conversation is complete, generate a recommendation with `/recommendation-from-conversation/{conversation_id}`

## CSV Format

The CSV files generated by the API include three sections:

1. Portfolio Allocation: Ticker, Asset Name, Allocation %, Asset Class
2. Portfolio Performance: Date, Portfolio Value
3. Portfolio Metrics: Metric, Value

Example:

```
Portfolio Allocation
Ticker,Asset Name,Allocation %,Asset Class
SPY,S&P 500 ETF,60,Equity
AGG,iShares Core U.S. Aggregate Bond ETF,40,Fixed Income

Portfolio Performance
Date,Portfolio Value
2013-05-31,100.00
2013-06-30,98.23
...

Portfolio Metrics
Metric,Value
CAGR,8.5%
Volatility,12.3%
Sharpe Ratio,0.69
Max Drawdown,25.4%
```